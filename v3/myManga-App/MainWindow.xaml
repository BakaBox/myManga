<Window 
    x:Class="myManga_App.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:p="http://schemas.microsoft.com/netfx/2007/xaml/presentation"
    xmlns:shell="http://schemas.microsoft.com/winfx/2006/xaml/presentation/shell"
    xmlns:button="clr-namespace:myManga_App.Resources.Theme.Buttons"
    xmlns:ViewModels="clr-namespace:myManga_App.ViewModels"
    xmlns:Properties="clr-namespace:myManga_App.Properties"
    Title="{DynamicResource AppTitle}"
    WindowState="{Binding Source={x:Static Properties:Settings.Default}, Path=WindowState, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
    x:Name="myMangaMainWindow"
    Height="350"
    Width="525"
    Icon="/myManga;component/Resources/Icon.ico"
    SnapsToDevicePixels="True"
    Style="{DynamicResource myMangaWindow}">
    <Window.CommandBindings>
        <CommandBinding
            Command="{x:Static SystemCommands.CloseWindowCommand}"
            Executed="_OnSystemCommandCloseWindow"/>
        <CommandBinding 
            Command="{x:Static SystemCommands.MaximizeWindowCommand}"
            Executed="_OnSystemCommandMaximizeWindow"
            CanExecute="_OnSystemCommandCanResizeWindow"/>
        <CommandBinding 
            Command="{x:Static SystemCommands.RestoreWindowCommand}"
            Executed="_OnSystemCommandRestoreWindow"
            CanExecute="_OnSystemCommandCanResizeWindow"/>
        <CommandBinding
            Command="{x:Static SystemCommands.MinimizeWindowCommand}"
            Executed="_OnSystemCommandMinimizeWindow"
            CanExecute="_OnSystemCommandCanMinimizeWindow"/>
        <CommandBinding
            Command="{x:Static SystemCommands.ShowSystemMenuCommand}"
            Executed="_OnSystemCommandShowSystemMenu"/>
    </Window.CommandBindings>
    <Window.DataContext>
        <ViewModels:MainViewModel/>
    </Window.DataContext>
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/myManga;component/Themes/WindowBase.xaml"/>
                <ResourceDictionary Source="/myManga;component/Themes/CoreResourceDictionary.xaml"/>
                <ResourceDictionary Source="/myManga;component/Resources/Localization/Dictionary_en-US.xaml"/>
                <ResourceDictionary Source="/myManga;component/Resources/ViewModel-View-Link.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <Grid>
        <ContentPresenter Content="{Binding HomeViewModel}" Margin="5,0,5,5"/>
        <StackPanel
            x:Name="Watermark"
            Grid.ZIndex="99"
            IsHitTestVisible="False"
            VerticalAlignment="Center"
            HorizontalAlignment="Center">
            <StackPanel.Triggers>
                <EventTrigger RoutedEvent="Grid.Loaded">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation 
                                Storyboard.TargetName="Watermark"
                                Storyboard.TargetProperty="Opacity"
                                BeginTime="0:0:2"
                                Duration="0:0:4"
                                From="1"
                                To="0"/>
                            <ObjectAnimationUsingKeyFrames 
                                Storyboard.TargetName="Watermark"
                                Storyboard.TargetProperty="Visibility">
                                <DiscreteObjectKeyFrame
                                    KeyTime="0:0:6.5"
                                    Value="{x:Static Visibility.Hidden}"/>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </StackPanel.Triggers>
            <StackPanel.Effect>
                <DropShadowEffect Color="{DynamicResource window-theme-primary-color}"/>
            </StackPanel.Effect>
            <StackPanel HorizontalAlignment="Center">
                <Grid Margin="5,0,0,-20" TextElement.FontSize="16" TextElement.FontWeight="Bold">
                    <TextBlock Text="{DynamicResource ProjectURL}" HorizontalAlignment="Left" />
                    <TextBlock Text="{Binding Path=AboutViewModel.AssemblyVersion, StringFormat=v{0}}" HorizontalAlignment="Right" />
                </Grid>
                <TextBlock 
                    Text="{DynamicResource AppTitle}"
                    FontSize="50"
                    Margin="0,0,0,0"/>
            </StackPanel>
        </StackPanel>
    </Grid>
</Window>
